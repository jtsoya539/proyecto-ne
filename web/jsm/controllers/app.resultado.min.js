var appResultado=angular.module("resultado",["angular.filter"]);function ControllerResultado(e,t,a,n,o){e.profile="",e.tab="",e.sesion={},e.currentMatch="",e.openMatch=!1,e.jornada,e.jornadaCant=22,e.clubes={},e.setCurrentMatch=function(t){e.currentMatch=t},e.setOpenMatch=function(){e.openMatch?e.openMatch=!1:e.openMatch=!0},e.setJornada=function(t){e.jornada+t<e.jornadaCant&&(e.jornada+=t),e.jornada<1&&(e.jornada=1)},e.scores={},e.getScores=function(){$.LoadingOverlay("show"),console.log("entro a los resultados de la jornada "+e.jornada),document.getElementById("appJugador").style.cursor="wait",t.fetchScores(e.jornada).then(function(t){e.scores=t.data.partidos,document.getElementById("appJugador").style.cursor="default",console.log("imprimo resultados.."),console.log(t),$.LoadingOverlay("hide")},function(e){alert("Error al intentar obtener resultados."),alert(e),$.LoadingOverlay("hide")})},e.setCurrentJornada=function(t){e.jornada=t,console.log("jornada actual: "+e.jornada),e.getScores()},e.players={},e.getPlayers=function(){console.log("entro a jugadores del partido "+e.currentMatch.id),document.getElementById("appJugador").style.cursor="wait",e.players={},o.fetchPlayers(e.currentMatch.id).then(function(t){e.players=t.data.partidoJugadores,document.getElementById("appJugador").style.cursor="default",console.log("imprimo los jugadores del partido "+e.currentMatch.id),console.log(e.players),$("#MatchPlayersListView").LoadingOverlay("hide")},function(e){alert("Error al intentar obtener jugadores."),alert(e),$("#MatchPlayersListView").LoadingOverlay("hide")})},e.incidences={},e.getIncidences=function(){console.log("entro a incidencias del partido "+e.currentMatch.id),document.getElementById("appJugador").style.cursor="wait",e.incidences={},a.fetchIncidences(e.currentMatch.id).then(function(t){e.incidences=t.data.incidencias,document.getElementById("appJugador").style.cursor="default",console.log("imprimo las incidencias del partido "+e.currentMatch.id),console.log(e.incidences),$("#MatchPlayersListView").LoadingOverlay("hide")},function(e){alert("Error al intentar obtener incidencias."),alert(e),$("#MatchPlayersListView").LoadingOverlay("hide")})},e.incidenceTypes={},e.getIncidenceTypes=function(){$.LoadingOverlay("show"),console.log("entro a tipos de incidencias "),e.incidenceTypes={},n.fetchIncidenceTypes().then(function(t){e.incidenceTypes=t.data.incidenciaTipos,console.log("imprimo tipos de incidencia "),console.log(e.incidenceTypes),$.LoadingOverlay("hide")},function(e){alert("Error al intentar obtener incidencias."),alert(e),$.LoadingOverlay("hide")})},e.getIncidenceTypes(),e.verJornada=function(t){e.setJornada(t),console.log("jornada: "+e.jornada),e.getScores()},e.verPartido=function(t){console.log("entro a detalles del partido: "+t.id),e.openMatch?e.currentMatch.id===t.id?(console.log("cierro detalles del partido: "+t.id),e.incidences={},e.setCurrentMatch(null),w3.toggleClass("#match"+t.id,"w3-hide"),e.setOpenMatch()):(w3.addClass(".match","w3-hide"),e.setCurrentMatch(t),e.getPlayers(),e.getIncidences(),w3.toggleClass("#match"+t.id,"w3-hide")):(e.setCurrentMatch(t),e.getPlayers(),e.getIncidences(),w3.toggleClass("#match"+t.id,"w3-hide"),e.setOpenMatch())}}appResultado.controller("ControllerResultado",ControllerResultado),ControllerResultado.$inject=["$scope","scoresFactory","incidencesFactory","incidenceTypesFactory","playersFactory"],appResultado.factory("scoresFactory",["$http",function(e){var t={fetchScores:function(t){return e.post("GetDatos?ori=datos_partidos",{data:{index:!1,spaces:!1,extraData:[{torneo:sesion.torneo,jornada:t}]}})}};return t}]),appResultado.factory("playersFactory",["$http",function(e){var t={fetchPlayers:function(t){return e.post("GetDatos?ori=datos_partido_jugadores",{data:{index:!1,spaces:!1,extraData:[{partido:t}]}})}};return t}]),appResultado.factory("incidencesFactory",["$http",function(e){var t={fetchIncidences:function(t){return e.post("GetDatos?ori=datos_incidencias",{data:{index:!1,spaces:!1,extraData:[{partido:t}]}})}};return t}]),appResultado.factory("incidenceTypesFactory",["$http",function(e){var t={fetchIncidenceTypes:function(){return e.post("GetDatos?ori=datos_incidencia_tipos",{data:{index:!0,spaces:!1}})}};return t}]);