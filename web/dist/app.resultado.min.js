var appResultado=angular.module("resultado",["angular.filter"]);function ControllerResultado(t,e,a,n,o){t.profile="",t.tab="",t.sesion={},t.currentMatch="",t.openMatch=!1,t.jornada,t.jornadaCant=22,t.clubes={},t.setCurrentMatch=function(e){t.currentMatch=e},t.setOpenMatch=function(){t.openMatch?t.openMatch=!1:t.openMatch=!0},t.setJornada=function(e){t.jornada+e<t.jornadaCant&&(t.jornada+=e),t.jornada<1&&(t.jornada=1)},t.scores={},t.getScores=function(){$.LoadingOverlay("show"),console.log("entro a los resultados de la jornada "+t.jornada),document.getElementById("appJugador").style.cursor="wait",e.fetchScores(t.jornada).then(function(e){t.scores=e.data.partidos,document.getElementById("appJugador").style.cursor="default",console.log("imprimo resultados.."),console.log(e),$.LoadingOverlay("hide")},function(e){alert("Error al intentar obtener resultados."),alert(e),$.LoadingOverlay("hide")})},t.setCurrentJornada=function(e){t.jornada=e,console.log("jornada actual: "+t.jornada),t.getScores()},t.players={},t.getPlayers=function(){console.log("entro a jugadores del partido "+t.currentMatch.id),document.getElementById("appJugador").style.cursor="wait",t.players={},o.fetchPlayers(t.currentMatch.id).then(function(e){t.players=e.data.partidoJugadores,document.getElementById("appJugador").style.cursor="default",console.log("imprimo los jugadores del partido "+t.currentMatch.id),console.log(t.players),$("#MatchPlayersListView").LoadingOverlay("hide")},function(e){alert("Error al intentar obtener jugadores."),alert(e),$("#MatchPlayersListView").LoadingOverlay("hide")})},t.incidences={},t.getIncidences=function(){console.log("entro a incidencias del partido "+t.currentMatch.id),document.getElementById("appJugador").style.cursor="wait",t.incidences={},a.fetchIncidences(t.currentMatch.id).then(function(e){t.incidences=e.data.incidencias,document.getElementById("appJugador").style.cursor="default",console.log("imprimo las incidencias del partido "+t.currentMatch.id),console.log(t.incidences),$("#MatchPlayersListView").LoadingOverlay("hide")},function(e){alert("Error al intentar obtener incidencias."),alert(e),$("#MatchPlayersListView").LoadingOverlay("hide")})},t.incidenceTypes={},t.getIncidenceTypes=function(){$.LoadingOverlay("show"),console.log("entro a tipos de incidencias "),t.incidenceTypes={},n.fetchIncidenceTypes().then(function(e){t.incidenceTypes=e.data.incidenciaTipos,console.log("imprimo tipos de incidencia "),console.log(t.incidenceTypes),$.LoadingOverlay("hide")},function(e){alert("Error al intentar obtener incidencias."),alert(e),$.LoadingOverlay("hide")})},t.getIncidenceTypes(),t.verJornada=function(e){t.setJornada(e),console.log("jornada: "+t.jornada),t.getScores()},t.verPartido=function(e){console.log("entro a detalles del partido: "+e.id),t.openMatch?t.currentMatch.id===e.id?(console.log("cierro detalles del partido: "+e.id),t.incidences={},t.setCurrentMatch(null),w3.toggleClass("#match"+e.id,"w3-hide"),t.setOpenMatch()):(w3.addClass(".match","w3-hide"),t.setCurrentMatch(e),t.getPlayers(),t.getIncidences(),w3.toggleClass("#match"+e.id,"w3-hide")):(t.setCurrentMatch(e),t.getPlayers(),t.getIncidences(),w3.toggleClass("#match"+e.id,"w3-hide"),t.setOpenMatch())}}appResultado.controller("ControllerResultado",ControllerResultado),ControllerResultado.$inject=["$scope","scoresFactory","incidencesFactory","incidenceTypesFactory","playersFactory"],appResultado.factory("scoresFactory",["$http",function(t){var e={fetchScores:function(e){return t.post("GetDatos?ori=datos_partidos",{data:{index:!1,spaces:!1,extraData:[{torneo:sesion.torneo,jornada:e}]}})}};return e}]),appResultado.factory("playersFactory",["$http",function(t){var e={fetchPlayers:function(e){return t.post("GetDatos?ori=datos_partido_jugadores",{data:{index:!1,spaces:!1,extraData:[{partido:e}]}})}};return e}]),appResultado.factory("incidencesFactory",["$http",function(t){var e={fetchIncidences:function(e){return t.post("GetDatos?ori=datos_incidencias",{data:{index:!1,spaces:!1,extraData:[{partido:e}]}})}};return e}]),appResultado.factory("incidenceTypesFactory",["$http",function(e){var t={fetchIncidenceTypes:function(){return e.post("GetDatos?ori=datos_incidencia_tipos",{data:{index:!0,spaces:!1}})}};return t}]);